<div class="gf-form-inline">
  <div class="gf-form">
    <span class="gf-form-label width-9 query-keyword">Service</span>
    <option-picker
      onChange="ctrl.handleServiceChange"
      selected="ctrl.target.service"
      options="ctrl.services"
      searchable="false"
      placeholder="'Select Services'"
      className="'width-15'"
    ></option-picker>
  </div>
  <div class="gf-form gf-form--grow"><div class="gf-form-label gf-form-label--grow"></div></div>
</div>
<div class="gf-form-inline">
  <div class="gf-form">
    <span class="gf-form-label width-9 query-keyword">Metric</span>
    <option-group-picker
      onChange="ctrl.handleMetricTypeChange"
      selected="ctrl.target.metricType"
      groups="ctrl.getMetricGroups()"
      searchable="true"
      placeholder="'Select Metric'"
      className="'width-15'"
    ></option-group-picker>
  </div>
  <div class="gf-form gf-form--grow"><div class="gf-form-label gf-form-label--grow"></div></div>
</div>
<div class="gf-form-inline">
  <div class="gf-form">
    <span class="gf-form-label query-keyword width-9">Filter</span>
    <div class="gf-form" ng-repeat="segment in ctrl.filterSegments.filterSegments">
      <metric-segment
        segment="segment"
        get-options="ctrl.getFilters(segment, $index)"
        on-change="ctrl.filterSegmentUpdated(segment, $index)"
      ></metric-segment>
    </div>
  </div>
  <div class="gf-form gf-form--grow"><div class="gf-form-label gf-form-label--grow"></div></div>
</div>
<div class="gf-form-inline" ng-hide="ctrl.$scope.hideGroupBys">
  <div class="gf-form">
    <span class="gf-form-label query-keyword width-9">Group By</span>
    <div class="gf-form" ng-repeat="segment in ctrl.groupBySegments">
      <metric-segment
        segment="segment"
        get-options="ctrl.getGroupBys(segment)"
        on-change="ctrl.groupByChanged(segment, $index)"
      ></metric-segment>
    </div>
  </div>
  <div class="gf-form gf-form--grow"><div class="gf-form-label gf-form-label--grow"></div></div>
</div>
