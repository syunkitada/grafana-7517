<div class="tight-form">
	<ul class="tight-form-list">
		<li class="tight-form-item query-keyword tight-form-align" style="width: 75px;">
			<span ng-show="isFirst">Group by</span>
			<span ng-hide="isFirst">Then by</span>
		</li>
		<li>
      <metric-segment segment="typeSegment" get-alt-segments="getBucketAggTypes()" on-value-changed="bucketAggTypeChanged()"></metric-segment>
      <metric-segment segment="fieldSegment" get-alt-segments="getFields()" on-value-changed="fieldChanged()"></metric-segment>
		</li>
		<li class="tight-form-item tight-form-align" ng-if="aggOptionsString">
			<a ng-click="toggleOptions()">{{aggOptionsString}}</a>
		</li>
	</ul>

	<ul class="tight-form-list pull-right">
		<li class="tight-form-item" ng-if="isFirst">
			<a class="pointer" ng-click="addBucketAgg()"><i class="fa fa-plus"></i></a>
		</li>
		<li class="tight-form-item" ng-if="!isLast">
			<a class="pointer" ng-click="removeBucketAgg($index)"><i class="fa fa-minus"></i></a>
		</li>
	</ul>
	<div class="clearfix"></div>
</div>

<div class="tight-form" ng-if="showOptions">
	<div style="margin: 20px 0 20px 148px;display: inline-block">
		<div class="tight-form">
			<ul class="tight-form-list">
				<li class="tight-form-item" style="width: 60px">
					Order
				</li>
				<li>
					<metric-segment segment="orderSegment" get-alt-segments="getOrders()" on-value-changed="orderSegmentChanged()"></metric-segment>
				</li>
			</ul>
			<div class="clearfix"></div>
		</div>
		<div class="tight-form">
			<ul class="tight-form-list">
				<li class="tight-form-item" style="width: 60px">
					Size
				</li>
				<li>
					<input type="text" class="input-mini tight-form-input" ng-model="agg.options.size" spellcheck='false' placeholder="0" ng-blur="get_data()">
				</li>
			</ul>
			<div class="clearfix"></div>
		</div>
		<div class="tight-form last">
			<ul class="tight-form-list">
				<li class="tight-form-item" style="width: 60px">
					Order by
				</li>
				<li>
					<metric-segment segment="timeSegment" get-alt-segments="getFields()" on-value-changed="timeFieldChanged()"></metric-segment>
				</li>
			</ul>
			<div class="clearfix"></div>
		</div>
	</div>
</div>


