<query-editor-row ctrl="ctrl" controls="true">

	<span style="display: block; overflow: hidden;">
		<input type="text" class="tight-form-clear-input" style="width: 100%;" ng-model="ctrl.target.target" give-focus="ctrl.target.textEditor" spellcheck='false' ng-model-onblur ng-change="ctrl.targetTextChanged()" ng-show="ctrl.target.textEditor"></input>
	</span>

	<ul class="tight-form-list" role="menu" ng-hide="ctrl.target.textEditor">
		<li ng-repeat="segment in ctrl.segments" role="menuitem">
			<metric-segment segment="segment" get-options="ctrl.getAltSegments($index)" on-change="ctrl.segmentValueChanged(segment, $index)"></metric-segment>
		</li>
		<li ng-repeat="func in ctrl.functions">
			<span graphite-func-editor class="tight-form-item tight-form-func">
			</span>
		</li>
		<li class="dropdown" graphite-add-func>
		</li>
	</ul>

</query-editor-row>
