<div class="dash-row-header">
  <a class="dash-row-header-title" ng-click="ctrl.toggleCollapse()">
    <span class="dash-row-collapse-toggle pointer">
      <i class="fa fa-chevron-down" ng-show="!ctrl.row.collapse"></i>
      <i class="fa fa-chevron-right" ng-show="ctrl.row.collapse"></i>
    </span>
    <span ng-class="ctrl.row.titleSize">{{ctrl.row.title}}</span>
  </a>

  <div class="dash-row-header-spacer">
  </div>

  <div class="dash-row-header-actions">
    <a class="pointer dash-row-header-action-add-panel" ng-click="ctrl.showAddPanel()">
      Add Panel
      <i class="fa fa-plus" ng-hide="ctrl.dropView===1"></i>
      <i class="fa fa-remove" ng-show="ctrl.dropView===1"></i>
    </a>
    <a class="pointer dash-row-header-action-show-options" ng-click="ctrl.showRowOptions()">
      Row Options
      <i class="fa fa-cog" ng-hide="ctrl.dropView===2"></i>
      <i class="fa fa-remove" ng-show="ctrl.dropView===2"></i>
    </a>
  </div>
</div>

<div ng-if="ctrl.dropView === 1">
  <dash-row-add-panel row-ctrl="ctrl"></dash-row-add-panel>
</div>

<div ng-if="ctrl.dropView === 2">
  <dash-row-options row-ctrl="ctrl"></dash-row-options>
</div>

<div class="panels-wrapper" ng-if="!ctrl.row.collapse">
  <div ng-repeat="panel in ctrl.row.panels track by panel.id" class="panel" ui-draggable="!ctrl.dashboard.meta.fullscreen" drag="panel.id" ui-on-drop="ctrl.onDrop($data, panel)" drag-handle-class="drag-handle" panel-width>
    <plugin-component type="panel" class="panel-margin">
    </plugin-component>
  </div>

  <div panel-drop-zone class="panel panel-drop-zone" ui-on-drop="ctrl.onDrop($data)" data-drop="true">
    <div class="panel-container" style="background: transparent">
      <div style="text-align: center">
        <em>Drop here</em>
      </div>
    </div>
  </div>

  <div class="clearfix"></div>
</div>

