<div class="dash-row-header">
  <a class="dash-row-header-title" ng-click="ctrl.showOptions = !ctrl.showOptions">
    <span ng-class="ctrl.row.titleSize">{{ctrl.row.title}}</span>
    <i class="fa fa-caret-down"></i>
  </a>

  <div class="dash-row-header-spacer">
  </div>

  <div class="dash-row-collapse-toggle" ng-click="ctrl.row.collapse = !ctrl.row.collapse">
    <a class="pointer">
      <i class="fa fa-chevron-down" ng-show="!ctrl.row.collapse"></i>
      <i class="fa fa-chevron-right" ng-show="ctrl.row.collapse"></i>
    </a>
  </div>
</div>

<div ng-if="ctrl.showOptions">
  <dash-row-options row-ctrl="ctrl"></dash-row-options>
</div>

<div class="panels-wrapper" ng-if="!ctrl.row.collapse">
  <div ng-repeat="panel in ctrl.row.panels track by panel.id" class="panel" ui-draggable="!ctrl.dashboard.meta.fullscreen" drag="panel.id" ui-on-drop="ctrl.onDrop($data, panel)" drag-handle-class="drag-handle" panel-width>
    <plugin-component type="panel" class="panel-margin">
    </plugin-component>
  </div>

  <div panel-drop-zone class="panel panel-drop-zone" ui-on-drop="ctrl.onDrop($data)" data-drop="true">
    <div class="panel-container" style="background: transparent">
      <div style="text-align: center">
        <em>Drop here</em>
      </div>
    </div>
  </div>

  <div class="clearfix"></div>
</div>

